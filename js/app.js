$(document).ready(function(){var e=$(window);$(document);/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);function a(){return!!(window.navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.match(/Trident.*rv\:11\./))}a()&&$("body").addClass("is-ie");var i=568;function t(){var a="<div class='dev-bp-debug'>"+e.width()+"</div>";$(".page").append(a),setTimeout(function(){$(".dev-bp-debug").fadeOut()},1e3),setTimeout(function(){$(".dev-bp-debug").remove()},1500)}function n(){$(".js-popup").magnificPopup({type:"inline",fixedContentPos:!0,fixedBgPos:!0,overflowY:"auto",closeBtnInside:!0,preloader:!1,midClick:!0,removalDelay:300,mainClass:"popup-buble",callbacks:{beforeOpen:function(){},close:function(){}}}),$("[js-popup-gallery]").magnificPopup({delegate:"a",type:"image",tLoading:"Загрузка #%curr%...",mainClass:"popup-buble",gallery:{enabled:!0,navigateByImgClick:!0,preload:[0,1]},image:{tError:'<a href="%url%">The image #%curr%</a> could not be loaded.'}}),$(".trending__wrapper").slick({autoplay:!0,dots:!1,arrows:!1,infinite:!0,speed:300,slidesToShow:1,centerMode:!0,variableWidth:!0}),setTimeout(function(){s||(s=!0,$(".wow").each(function(e,a){var i,t,n,o=scrollMonitor.create($(a));i=$(window).width()<768?0:$(a).data("animation-delay"),t=$(a).data("animation-class")?$(a).data("animation-class"):"wowFadeUp",n=$(a).data("animation-name")?$(a).data("animation-name"):"wowFade",o.enterViewport(throttle(function(){$(a).addClass(t),$(a).css({"animation-name":n,"animation-delay":i,visibility:"visible"})},100,{leading:!0})),o.exitViewport(throttle(function(){$(a).removeClass(t),$(a).css({"animation-name":"none","animation-delay":0,visibility:"hidden"})},100))}))},300),$(".js-dateMask").mask("99.99.99",{placeholder:"ДД.ММ.ГГ"}),$("input[type='tel']").mask("+7 (000) 000-0000",{placeholder:"+7 (___) ___-____"}),o(),e.on("resize",throttle(o,100)),e.on("resize",debounce(t,200))}function o(){var i=$("[js-reveal-footer]");if(i.length>0){var t=i.outerHeight();e.height()-t>100&&!a()?($("body").css({"margin-bottom":t}),i.css({position:"fixed","z-index":-10})):($("body").css({"margin-bottom":0}),i.css({position:"static","z-index":10}))}}e.on("resize",debounce(t,200)),n(),svg4everybody(),window.viewportUnitsBuggyfill.init({force:!0,hacks:window.viewportUnitsBuggyfillHacks,refreshDebounceWait:250,appendToBody:!0}),$('[href="#"]').click(function(e){e.preventDefault()}),$('a[href^="#section"]').click(function(){var e=$(this).attr("href");return $("body, html").animate({scrollTop:$(e).offset().top},1e3),!1}),0==$(".header-static").length&&e.on("scroll",throttle(function(){var a=e.scrollTop(),i=$(".header").not(".header--static"),t=i.height(),n=$(".hero").outerHeight()-t;a>t?i.addClass("header--transformed"):i.removeClass("header--transformed"),a>n?i.addClass("header--fixed"):i.removeClass("header--fixed")}),10),$("[js-hamburger]").on("click",function(){$(".hamburger").toggleClass("active"),$(".mobile-navi").toggleClass("active")}),$(".header__menu li").each(function(e,a){$(a).find("a").attr("href")==window.location.pathname.split("/").pop()?$(a).addClass("active"):$(a).removeClass("active")}),$(".promo-video .icon").on("click",function(){$(this).closest(".promo-video").toggleClass("playing"),$(this).closest(".promo-video").find("iframe").attr("src",$("iframe").attr("src").replace("autoplay=0","autoplay=1"))}),$(".ui-select__visible").on("click",function(e){var a=this;$(this).parent().parent().parent().find(".ui-select__visible").each(function(e,i){$(i).is($(a))||$(i).parent().removeClass("active")}),$(this).parent().toggleClass("active")}),$(".ui-select__dropdown span").on("click",function(){var e=$(this).data("val");e&&($(this).siblings().removeClass("active"),$(this).addClass("active"),$(this).closest(".ui-select").removeClass("active"),$(this).closest(".ui-select").find("input").val(e),$(this).closest(".ui-select").find(".ui-select__visible span").text(e))}),$(document).click(function(e){var a=new Array;a.push($(".ui-select")),$.each(a,function(a,i){$(i).is(e.target)||0!==$(i).has(e.target).length||$(i).removeClass("active")})}),$(".ui-number span").on("click",function(e){var a=$(this).parent().find("input"),i=parseInt($(this).parent().find("input").val())||0;if("minus"==$(this).data("action")){if(i<=1)return!1;a.val(i-1)}else if("plus"==$(this).data("action")){if(i>=99)return!1;a.val(i+1)}}),$(document).one("focus.autoExpand","textarea.autoExpand",function(){var e=this.value;this.value="",this.baseScrollHeight=this.scrollHeight,this.value=e}).on("input.autoExpand","textarea.autoExpand",function(){var e,a=0|this.getAttribute("data-min-rows");this.rows=a,e=Math.ceil((this.scrollHeight-this.baseScrollHeight)/17),this.rows=a+e});var s=!1;Barba.Pjax.Dom.containerClass="page";var r=Barba.BaseTransition.extend({start:function(){Promise.all([this.newContainerLoading,this.fadeOut()]).then(this.fadeIn.bind(this))},fadeOut:function(){return $(this.oldContainer).animate({opacity:.5},200).promise()},fadeIn:function(){var e=this,a=$(this.newContainer);$(this.oldContainer).hide(),a.css({visibility:"visible",opacity:.5}),a.animate({opacity:1},200,function(){document.body.scrollTop=0,e.done()})}});Barba.Pjax.getTransition=function(){return r},Barba.Prefetch.init(),Barba.Pjax.start(),Barba.Dispatcher.on("newPageReady",function(a,t,o,s){n(),e.width()<i&&closeMobileMenu()})}),$(document).ready(function(){$(".js-registration-form").validate({errorPlacement:function(e,a){e.addClass("ui-input__validation"),e.appendTo(a.parent("div"))},highlight:function(e){$(e).parent("div").addClass("has-error")},unhighlight:function(e){$(e).parent("div").removeClass("has-error")},submitHandler:function(e){$(e).addClass("loading"),$.ajax({type:"POST",url:$(e).attr("action"),data:$(e).serialize(),success:function(a){$(e).removeClass("loading");var i=$.parseJSON(a);"success"==i.status||$(e).find("[data-error]").html(i.message).show()}})},rules:{last_name:"required",first_name:"required",email:{required:!0,email:!0},password:{required:!0,minlength:6}},messages:{last_name:"Заполните это поле",first_name:"Заполните это поле",email:{required:"Заполните это поле",email:"Email содержит неправильный формат"},password:{required:"Заполните это поле",email:"Пароль мимимум 6 символов"}}})});